From f2ac2dfc798f173faab1e5c4dddba852d8dd0bd1 Mon Sep 17 00:00:00 2001
From: "Brian J. Burg" <burg@cs.washington.edu>
Date: Wed, 11 Mar 2015 21:04:27 -0700
Subject: [PATCH] FIXUP bug in serializing effective style properties from
 inherited inline styles.

---
 Source/WebCore/inspector/InspectorDOMTracingAgent.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Source/WebCore/inspector/InspectorDOMTracingAgent.cpp b/Source/WebCore/inspector/InspectorDOMTracingAgent.cpp
index 890e821..f4c5eb8 100644
--- a/Source/WebCore/inspector/InspectorDOMTracingAgent.cpp
+++ b/Source/WebCore/inspector/InspectorDOMTracingAgent.cpp
@@ -256,21 +256,21 @@ std::unique_ptr<StyleSnapshot> DOMTracingAgent::createStyleSnapshot(Element& tar
                 .setProperty(WTF::move(propertyObject))
                 .release();
 
             entryObject->setSourceRule(rule.ruleId().asProtocolValue<Inspector::Protocol::CSS::CSSRuleId>());
         });
         propertiesArray->addItem(WTF::move(entryObject));
     }
 
     for (auto entry : winningInlineStyleMap) {
         ASSERT(is<StyledElement>(entry.value));
-        InlineStyleRuleSet& inlineStyle = m_cssAgent->ruleSetForInlineStyle(downcast<StyledElement>(targetElement));
+        InlineStyleRuleSet& inlineStyle = m_cssAgent->ruleSetForInlineStyle(*entry.value);
         RefPtr<Inspector::Protocol::CSS::CSSProperty> propertyObject;
         RefPtr<Inspector::Protocol::DOMTracing::PropertyEntry> entryObject;
         inlineStyle.withInlineStyle([&] (StyleDeclaration& style) {
             CSSPropertyID propertyId = entry.key;
             propertyObject = buildObjectForProperty(style, propertyId);
             entryObject = Inspector::Protocol::DOMTracing::PropertyEntry::create()
                 .setProperty(WTF::move(propertyObject))
                 .release();
         });
 
-- 
2.3.2

